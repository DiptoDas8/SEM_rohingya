# View(efa.df)
psych::pca(efa.df, nfactors = 3)
efa.df <- rohingya.df %>% select(all_of(safety.stability))
# View(efa.df)
psych::pca(efa.df, nfactors = 3)
efa.df <- rohingya.df %>% select(all_of(safety.stability))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
rohingya.df <- read_excel('../data/rohingya.xlsx', sheet = 'Sheet1')
# View(rohingya.df)
rohingya.df <- na.omit(rohingya.df)
rohingya.df <- rohingya.df %>% select(!id)
efa.df <- rohingya.df %>% select(all_of(safety.stability))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
rohingya.df <- read_excel('../data/rohingya.xlsx', sheet = 'Sheet1')
# View(rohingya.df)
rohingya.df <- na.omit(rohingya.df)
rohingya.df <- rohingya.df %>% select(!id)
efa.df <- rohingya.df %>% select(all_of(safety.stability))
View(efa.df)
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
safety.stability <- c('stress', 'improvement_in_6mos',
'discussion_about_violent_groups', 'number_of_violence',
'number_of_sexual_harrassment', 'fear_of_children_safety',
'knowledge_of_missing_children',
'intention_to_leave', 'fear_of_leaving_again',
'feeling_about_future')
efa.df <- rohingya.df %>% select(all_of(safety.stability))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
efa.df <- rohingya.df %>% select(all_of(language.cultural.knowledge))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(language.cultural.knowledge)))
efa.df <- rohingya.df %>% select(all_of(rights.and.citizenship))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(rights.and.citizenship)))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
efa.df <- rohingya.df %>% select(all_of(social.bonds))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
efa.df <- rohingya.df %>% select(all_of(social.bridges))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
efa.df <- rohingya.df %>% select(all_of(social.links))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
efa.df <- rohingya.df %>% select(all_of(housing))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
efa.df <- rohingya.df %>% select(all_of(health))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
efa.df <- rohingya.df %>% select(all_of(employment))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
employment <- c('number_of_jobs', 'income_from_jobs',) # 'sex'
efa.df <- rohingya.df %>% select(all_of(employment))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
efa.df <- rohingya.df %>% select(all_of(employment))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
employment <- c('number_of_jobs', 'income_from_jobs',) # 'sex'
employment <- c('number_of_jobs', 'income_from_jobs') # 'sex'
efa.df <- rohingya.df %>% select(all_of(employment))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
efa.df <- rohingya.df %>% select(all_of(education))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
efa.df <- rohingya.df %>% select(all_of(social.bonds))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
efa.df <- rohingya.df %>% select(all_of(social.bridges))
# View(efa.df)
psych::pca(efa.df, nfactors = length(names(efa.df)))
setwd("E:/SU/Spring 2021/IST 777/project/python_analysis/code")
library(lavaan)
library(tidyverse)
library(psych)
library(readxl)
rohingya.df <- read.excel('../data/rohingya.xlsx', sheet = 'Sheet1')
library(lavaan)
library(tidyverse)
library(psych)
library(readxl)
rohingya.df <- read_excel('../data/rohingya.xlsx', sheet = 'Sheet1')
# View(rohingya.df)
rohingya.df <- na.omit(rohingya.df)
rohingya.df <- rohingya.df %>% select(!id)
model.desc <- '
# measurement model
# ***   DOMAINS   ***
employment  =~ number_of_jobs + income_from_jobs
# + sex
housing     =~ housing_space + sanitation_of_housing
# + relocation_to_bhasanchar
education   =~ quality_of_education + lt_12_education + 12_18_education + gt_18_education
health      =~ psychological_healthcare + number_of_healthcare_facilities + quality_of_healthcare
social_links    =~ help_from_ngo + trust_on_ngo + trust_on_law_enforcement
social_bridges  =~ possibility_of_friendship_with_host + friendship_with_host + marriage_to_host
social_bonds    =~ bond_with_rohingyas_outside + bond_with_neighbors + bond_with_majhis
# + number_of_friends + bond_with_imams
language_and_cultural_knowledge =~ number_of_religious_facilities + removal_of_religious_barriers + cultural_mixability
safety_and_stability            =~ intention_to_leave + improvement_in_6mos + feeling_about_future + number_of_violence + fear_of_children_safety
# + stress + knowledge_of_missing_children + number_of_sexual_harassment + fear_of_leaving_again + discussion_about_violent_groups
rights_and_citizenship  =~ repatriation_in_home + return_to_home + rights_in_home
# ***   THEMES   ***
markers_and_means   =~ education + employment + housing + health
social_connections  =~ social_bonds + social_bridges + social_links
facilitators        =~ language_and_cultural_knowledge + safety_and_stability
foundation          =~ rights_and_citizenship
integration         =~ markers_and_means + social_connections + facilitators + foundation
# regressions
number_of_jobs  ~ sex    # should we use it?
# residual correlations
removal_of_religious_barriers   ~~ number_of_religious_facilities
'
model.fit <- cfa(model.desc, data = rohingya.df)
model.fit <- lavaan::sem(model = model.desc, data = rohingya.df)
model.desc <- '
# measurement model
# ***   DOMAINS   ***
employment  =~ number_of_jobs + income_from_jobs
# + sex
housing     =~ housing_space + sanitation_of_housing
# + relocation_to_bhasanchar
education   =~ quality_of_education + lt_12_education + _education + gt_18_education
health      =~ psychological_healthcare + number_of_healthcare_facilities + quality_of_healthcare
social_links    =~ help_from_ngo + trust_on_ngo + trust_on_law_enforcement
social_bridges  =~ possibility_of_friendship_with_host + friendship_with_host + marriage_to_host
social_bonds    =~ bond_with_rohingyas_outside + bond_with_neighbors + bond_with_majhis
# + number_of_friends + bond_with_imams
language_and_cultural_knowledge =~ number_of_religious_facilities + removal_of_religious_barriers + cultural_mixability
safety_and_stability            =~ intention_to_leave + improvement_in_6mos + feeling_about_future + number_of_violence + fear_of_children_safety
# + stress + knowledge_of_missing_children + number_of_sexual_harassment + fear_of_leaving_again + discussion_about_violent_groups
rights_and_citizenship  =~ repatriation_in_home + return_to_home + rights_in_home
# ***   THEMES   ***
markers_and_means   =~ education + employment + housing + health
social_connections  =~ social_bonds + social_bridges + social_links
facilitators        =~ language_and_cultural_knowledge + safety_and_stability
foundation          =~ rights_and_citizenship
integration         =~ markers_and_means + social_connections + facilitators + foundation
# regressions
number_of_jobs  ~ sex    # should we use it?
# residual correlations
removal_of_religious_barriers   ~~ number_of_religious_facilities
'
model.fit <- lavaan::sem(model = model.desc, data = rohingya.df)
model.desc <- '
# measurement model
# ***   DOMAINS   ***
employment  =~ number_of_jobs + income_from_jobs
# + sex
housing     =~ housing_space + sanitation_of_housing
# + relocation_to_bhasanchar
education   =~ quality_of_education + lt_12_education + education + gt_18_education
health      =~ psychological_healthcare + number_of_healthcare_facilities + quality_of_healthcare
social_links    =~ help_from_ngo + trust_on_ngo + trust_on_law_enforcement
social_bridges  =~ possibility_of_friendship_with_host + friendship_with_host + marriage_to_host
social_bonds    =~ bond_with_rohingyas_outside + bond_with_neighbors + bond_with_majhis
# + number_of_friends + bond_with_imams
language_and_cultural_knowledge =~ number_of_religious_facilities + removal_of_religious_barriers + cultural_mixability
safety_and_stability            =~ intention_to_leave + improvement_in_6mos + feeling_about_future + number_of_violence + fear_of_children_safety
# + stress + knowledge_of_missing_children + number_of_sexual_harassment + fear_of_leaving_again + discussion_about_violent_groups
rights_and_citizenship  =~ repatriation_in_home + return_to_home + rights_in_home
# ***   THEMES   ***
markers_and_means   =~ education + employment + housing + health
social_connections  =~ social_bonds + social_bridges + social_links
facilitators        =~ language_and_cultural_knowledge + safety_and_stability
foundation          =~ rights_and_citizenship
integration         =~ markers_and_means + social_connections + facilitators + foundation
# regressions
number_of_jobs  ~ sex    # should we use it?
# residual correlations
removal_of_religious_barriers   ~~ number_of_religious_facilities
'
model.fit <- lavaan::sem(model = model.desc, data = rohingya.df)
library(lavaan)
library(tidyverse)
library(psych)
library(readxl)
rohingya.df <- read_excel('../data/rohingya.xlsx', sheet = 'Sheet1')
# View(rohingya.df)
rohingya.df <- na.omit(rohingya.df)
rohingya.df <- rohingya.df %>% select(!id)
model.desc <- '
# measurement model
# ***   DOMAINS   ***
employment  =~ number_of_jobs + income_from_jobs
# + sex
housing     =~ housing_space + sanitation_of_housing
# + relocation_to_bhasanchar
education   =~ quality_of_education + lt_12_education + between_12_18_education + gt_18_education
health      =~ psychological_healthcare + number_of_healthcare_facilities + quality_of_healthcare
social_links    =~ help_from_ngo + trust_on_ngo + trust_on_law_enforcement
social_bridges  =~ possibility_of_friendship_with_host + friendship_with_host + marriage_to_host
social_bonds    =~ bond_with_rohingyas_outside + bond_with_neighbors + bond_with_majhis
# + number_of_friends + bond_with_imams
language_and_cultural_knowledge =~ number_of_religious_facilities + removal_of_religious_barriers + cultural_mixability
safety_and_stability            =~ intention_to_leave + improvement_in_6mos + feeling_about_future + number_of_violence + fear_of_children_safety
# + stress + knowledge_of_missing_children + number_of_sexual_harassment + fear_of_leaving_again + discussion_about_violent_groups
rights_and_citizenship  =~ repatriation_in_home + return_to_home + rights_in_home
# ***   THEMES   ***
markers_and_means   =~ education + employment + housing + health
social_connections  =~ social_bonds + social_bridges + social_links
facilitators        =~ language_and_cultural_knowledge + safety_and_stability
foundation          =~ rights_and_citizenship
integration         =~ markers_and_means + social_connections + facilitators + foundation
# regressions
number_of_jobs  ~ sex    # should we use it?
# residual correlations
removal_of_religious_barriers   ~~ number_of_religious_facilities
'
model.fit <- lavaan::sem(model = model.desc, data = rohingya.df)
lavaan::summary(model.fit, standardized=TRUE)
cat(lavaan::summary(model.fit, standardized=TRUE),
file = '../result/lavaan_summary.txt')
cat(paste(lavaan::summary(model.fit, standardized=TRUE), sep = '\n'),
file = '../result/lavaan_summary.txt')
model.desc <- '
# measurement model
# ***   DOMAINS   ***
employment  =~ number_of_jobs + income_from_jobs
# + sex
housing     =~ housing_space + sanitation_of_housing
# + relocation_to_bhasanchar
education   =~ quality_of_education + lt_12_education + between_12_18_education + gt_18_education
health      =~ psychological_healthcare + number_of_healthcare_facilities + quality_of_healthcare
social_links    =~ help_from_ngo + trust_on_ngo + trust_on_law_enforcement
social_bridges  =~ possibility_of_friendship_with_host + friendship_with_host + marriage_to_host
social_bonds    =~ bond_with_rohingyas_outside + bond_with_neighbors + bond_with_majhis
# + number_of_friends + bond_with_imams
language_and_cultural_knowledge =~ number_of_religious_facilities + removal_of_religious_barriers + cultural_mixability
safety_and_stability            =~ intention_to_leave + improvement_in_6mos + feeling_about_future + number_of_violence + fear_of_children_safety
# + stress + knowledge_of_missing_children + number_of_sexual_harassment + fear_of_leaving_again + discussion_about_violent_groups
rights_and_citizenship  =~ repatriation_in_home + return_to_home + rights_in_home
# ***   THEMES   ***
markers_and_means   =~ education + employment + housing + health
social_connections  =~ social_bonds + social_bridges + social_links
facilitators        =~ language_and_cultural_knowledge + safety_and_stability
foundation          =~ rights_and_citizenship
integration         <~ markers_and_means + social_connections + facilitators + foundation
# regressions
number_of_jobs  ~ sex    # should we use it?
# residual correlations
removal_of_religious_barriers   ~~ number_of_religious_facilities
'
model.fit <- lavaan::sem(model = model.desc, data = rohingya.df)
install.packages("semPlot")
install.packages("tidySEM")
library(semPlot)
library(lavaan)
library(tidyverse)
library(psych)
library(readxl)
library(semPlot)
library(tidySEM)
rohingya.df <- read_excel('../data/rohingya.xlsx', sheet = 'Sheet1')
# View(rohingya.df)
rohingya.df <- na.omit(rohingya.df)
rohingya.df <- rohingya.df %>% select(!id)
model.desc <- '
# measurement model
# ***   DOMAINS   ***
employment  =~ number_of_jobs + income_from_jobs
# + sex
housing     =~ housing_space + sanitation_of_housing
# + relocation_to_bhasanchar
education   =~ quality_of_education + lt_12_education + between_12_18_education + gt_18_education
health      =~ psychological_healthcare + number_of_healthcare_facilities + quality_of_healthcare
social_links    =~ help_from_ngo + trust_on_ngo + trust_on_law_enforcement
social_bridges  =~ possibility_of_friendship_with_host + friendship_with_host + marriage_to_host
social_bonds    =~ bond_with_rohingyas_outside + bond_with_neighbors + bond_with_majhis
# + number_of_friends + bond_with_imams
language_and_cultural_knowledge =~ number_of_religious_facilities + removal_of_religious_barriers + cultural_mixability
safety_and_stability            =~ intention_to_leave + improvement_in_6mos + feeling_about_future + number_of_violence + fear_of_children_safety
# + stress + knowledge_of_missing_children + number_of_sexual_harassment + fear_of_leaving_again + discussion_about_violent_groups
rights_and_citizenship  =~ repatriation_in_home + return_to_home + rights_in_home
# ***   THEMES   ***
markers_and_means   =~ education + employment + housing + health
social_connections  =~ social_bonds + social_bridges + social_links
facilitators        =~ language_and_cultural_knowledge + safety_and_stability
foundation          =~ rights_and_citizenship
integration         <~ markers_and_means + social_connections + facilitators + foundation
# regressions
number_of_jobs  ~ sex    # should we use it?
# residual correlations
removal_of_religious_barriers   ~~ number_of_religious_facilities
'
model.fit <- lavaan::sem(model = model.desc, data = rohingya.df)
lavaan::summary(model.fit, standardized=TRUE)
?tidy_sem
help(tidySEM)
??tidySEM
help(tidySEM)
?graph_sem
graph_sem(model.fit)
library(lavaan)
library(tidyverse)
library(psych)
library(readxl)
library(semPlot)
library(tidySEM)
rohingya.df <- read_excel('../data/rohingya.xlsx', sheet = 'Sheet1')
# View(rohingya.df)
rohingya.df <- na.omit(rohingya.df)
rohingya.df <- rohingya.df %>% select(!id)
model.desc <- '
# measurement model
# ***   DOMAINS   ***
employment  =~ number_of_jobs + income_from_jobs
# + sex
housing     =~ housing_space + sanitation_of_housing
# + relocation_to_bhasanchar
education   =~ quality_of_education + lt_12_education + between_12_18_education + gt_18_education
health      =~ psychological_healthcare + number_of_healthcare_facilities + quality_of_healthcare
# social_links    =~ help_from_ngo + trust_on_ngo + trust_on_law_enforcement
# social_bridges  =~ possibility_of_friendship_with_host + friendship_with_host + marriage_to_host
# social_bonds    =~ bond_with_rohingyas_outside + bond_with_neighbors + bond_with_majhis
#                 # + number_of_friends + bond_with_imams
#
# language_and_cultural_knowledge =~ number_of_religious_facilities + removal_of_religious_barriers + cultural_mixability
# safety_and_stability            =~ intention_to_leave + improvement_in_6mos + feeling_about_future + number_of_violence + fear_of_children_safety
#                                 # + stress + knowledge_of_missing_children + number_of_sexual_harassment + fear_of_leaving_again + discussion_about_violent_groups
#
# rights_and_citizenship  =~ repatriation_in_home + return_to_home + rights_in_home
# ***   THEMES   ***
markers_and_means   =~ education + employment + housing + health
# social_connections  =~ social_bonds + social_bridges + social_links
# facilitators        =~ language_and_cultural_knowledge + safety_and_stability
# foundation          =~ rights_and_citizenship
# integration         <~ markers_and_means + social_connections + facilitators + foundation
# regressions
number_of_jobs  ~ sex    # should we use it?
# residual correlations
# removal_of_religious_barriers   ~~ number_of_religious_facilities
'
model.fit <- lavaan::sem(model = model.desc, data = rohingya.df)
lavaan::summary(model.fit, standardized=TRUE)
graph_sem(model.fit)
library(lavaan)
library(tidyverse)
library(psych)
library(readxl)
library(semPlot)
library(tidySEM)
rohingya.df <- read_excel('../data/rohingya.xlsx', sheet = 'Sheet1')
# View(rohingya.df)
rohingya.df <- na.omit(rohingya.df)
rohingya.df <- rohingya.df %>% select(!id)
model.desc <- '
# measurement model
# ***   DOMAINS   ***
# employment  =~ number_of_jobs + income_from_jobs
#             # + sex
# housing     =~ housing_space + sanitation_of_housing
#             # + relocation_to_bhasanchar
# education   =~ quality_of_education + lt_12_education + between_12_18_education + gt_18_education
# health      =~ psychological_healthcare + number_of_healthcare_facilities + quality_of_healthcare
social_links    =~ help_from_ngo + trust_on_ngo + trust_on_law_enforcement
social_bridges  =~ possibility_of_friendship_with_host + friendship_with_host + marriage_to_host
social_bonds    =~ bond_with_rohingyas_outside + bond_with_neighbors + bond_with_majhis
# + number_of_friends + bond_with_imams
# language_and_cultural_knowledge =~ number_of_religious_facilities + removal_of_religious_barriers + cultural_mixability
# safety_and_stability            =~ intention_to_leave + improvement_in_6mos + feeling_about_future + number_of_violence + fear_of_children_safety
#                                 # + stress + knowledge_of_missing_children + number_of_sexual_harassment + fear_of_leaving_again + discussion_about_violent_groups
#
# rights_and_citizenship  =~ repatriation_in_home + return_to_home + rights_in_home
# ***   THEMES   ***
# markers_and_means   =~ education + employment + housing + health
social_connections  =~ social_bonds + social_bridges + social_links
# facilitators        =~ language_and_cultural_knowledge + safety_and_stability
# foundation          =~ rights_and_citizenship
# integration         <~ markers_and_means + social_connections + facilitators + foundation
# regressions
# number_of_jobs  ~ sex    # should we use it?
# residual correlations
# removal_of_religious_barriers   ~~ number_of_religious_facilities
'
model.fit <- lavaan::sem(model = model.desc, data = rohingya.df)
lavaan::summary(model.fit, standardized=TRUE)
graph_sem(model.fit)
library(lavaan)
library(tidyverse)
library(psych)
library(readxl)
library(semPlot)
library(tidySEM)
rohingya.df <- read_excel('../data/rohingya.xlsx', sheet = 'Sheet1')
# View(rohingya.df)
rohingya.df <- na.omit(rohingya.df)
rohingya.df <- rohingya.df %>% select(!id)
model.desc <- '
# measurement model
# ***   DOMAINS   ***
# employment  =~ number_of_jobs + income_from_jobs
#             # + sex
# housing     =~ housing_space + sanitation_of_housing
#             # + relocation_to_bhasanchar
# education   =~ quality_of_education + lt_12_education + between_12_18_education + gt_18_education
# health      =~ psychological_healthcare + number_of_healthcare_facilities + quality_of_healthcare
#
# social_links    =~ help_from_ngo + trust_on_ngo + trust_on_law_enforcement
# social_bridges  =~ possibility_of_friendship_with_host + friendship_with_host + marriage_to_host
# social_bonds    =~ bond_with_rohingyas_outside + bond_with_neighbors + bond_with_majhis
#                 # + number_of_friends + bond_with_imams
language_and_cultural_knowledge =~ number_of_religious_facilities + removal_of_religious_barriers + cultural_mixability
safety_and_stability            =~ intention_to_leave + improvement_in_6mos + feeling_about_future + number_of_violence + fear_of_children_safety
# + stress + knowledge_of_missing_children + number_of_sexual_harassment + fear_of_leaving_again + discussion_about_violent_groups
# rights_and_citizenship  =~ repatriation_in_home + return_to_home + rights_in_home
# ***   THEMES   ***
# markers_and_means   =~ education + employment + housing + health
# social_connections  =~ social_bonds + social_bridges + social_links
facilitators        =~ language_and_cultural_knowledge + safety_and_stability
# foundation          =~ rights_and_citizenship
# integration         <~ markers_and_means + social_connections + facilitators + foundation
# regressions
# number_of_jobs  ~ sex    # should we use it?
# residual correlations
removal_of_religious_barriers   ~~ number_of_religious_facilities
'
model.fit <- lavaan::sem(model = model.desc, data = rohingya.df)
lavaan::summary(model.fit, standardized=TRUE)
graph_sem(model.fit)
library(lavaan)
library(tidyverse)
library(psych)
library(readxl)
library(semPlot)
library(tidySEM)
rohingya.df <- read_excel('../data/rohingya.xlsx', sheet = 'Sheet1')
# View(rohingya.df)
rohingya.df <- na.omit(rohingya.df)
rohingya.df <- rohingya.df %>% select(!id)
model.desc <- '
# measurement model
# ***   DOMAINS   ***
# employment  =~ number_of_jobs + income_from_jobs
#             # + sex
# housing     =~ housing_space + sanitation_of_housing
#             # + relocation_to_bhasanchar
# education   =~ quality_of_education + lt_12_education + between_12_18_education + gt_18_education
# health      =~ psychological_healthcare + number_of_healthcare_facilities + quality_of_healthcare
#
# social_links    =~ help_from_ngo + trust_on_ngo + trust_on_law_enforcement
# social_bridges  =~ possibility_of_friendship_with_host + friendship_with_host + marriage_to_host
# social_bonds    =~ bond_with_rohingyas_outside + bond_with_neighbors + bond_with_majhis
#                 # + number_of_friends + bond_with_imams
#
# language_and_cultural_knowledge =~ number_of_religious_facilities + removal_of_religious_barriers + cultural_mixability
# safety_and_stability            =~ intention_to_leave + improvement_in_6mos + feeling_about_future + number_of_violence + fear_of_children_safety
#                                 # + stress + knowledge_of_missing_children + number_of_sexual_harassment + fear_of_leaving_again + discussion_about_violent_groups
rights_and_citizenship  =~ repatriation_in_home + return_to_home + rights_in_home
# ***   THEMES   ***
# markers_and_means   =~ education + employment + housing + health
# social_connections  =~ social_bonds + social_bridges + social_links
# facilitators        =~ language_and_cultural_knowledge + safety_and_stability
foundation          =~ rights_and_citizenship
# integration         <~ markers_and_means + social_connections + facilitators + foundation
# regressions
# number_of_jobs  ~ sex    # should we use it?
# residual correlations
# removal_of_religious_barriers   ~~ number_of_religious_facilities
'
model.fit <- lavaan::sem(model = model.desc, data = rohingya.df)
lavaan::summary(model.fit, standardized=TRUE)
graph_sem(model.fit)
library(lavaan)
library(tidyverse)
library(psych)
library(readxl)
library(semPlot)
library(tidySEM)
rohingya.df <- read_excel('../data/rohingya.xlsx', sheet = 'Sheet1')
# View(rohingya.df)
rohingya.df <- na.omit(rohingya.df)
rohingya.df <- rohingya.df %>% select(!id)
model.desc <- '
# measurement model
# ***   DOMAINS   ***
employment  =~ number_of_jobs + income_from_jobs
# + sex
housing     =~ housing_space + sanitation_of_housing
# + relocation_to_bhasanchar
education   =~ quality_of_education + lt_12_education + between_12_18_education + gt_18_education
health      =~ psychological_healthcare + number_of_healthcare_facilities + quality_of_healthcare
social_links    =~ help_from_ngo + trust_on_ngo + trust_on_law_enforcement
social_bridges  =~ possibility_of_friendship_with_host + friendship_with_host + marriage_to_host
social_bonds    =~ bond_with_rohingyas_outside + bond_with_neighbors + bond_with_majhis
# + number_of_friends + bond_with_imams
language_and_cultural_knowledge =~ number_of_religious_facilities + removal_of_religious_barriers + cultural_mixability
safety_and_stability            =~ intention_to_leave + improvement_in_6mos + feeling_about_future + number_of_violence + fear_of_children_safety
# + stress + knowledge_of_missing_children + number_of_sexual_harassment + fear_of_leaving_again + discussion_about_violent_groups
rights_and_citizenship  =~ repatriation_in_home + return_to_home + rights_in_home
# ***   THEMES   ***
markers_and_means   =~ education + employment + housing + health
social_connections  =~ social_bonds + social_bridges + social_links
facilitators        =~ language_and_cultural_knowledge + safety_and_stability
foundation          =~ rights_and_citizenship
integration         =~ markers_and_means + social_connections + facilitators + foundation
# regressions
number_of_jobs  ~ sex    # should we use it?
# residual correlations
removal_of_religious_barriers   ~~ number_of_religious_facilities
'
model.fit <- lavaan::sem(model = model.desc, data = rohingya.df)
lavaan::summary(model.fit, standardized=TRUE)
graph_sem(model.fit)
